<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> SignIn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--  <meta name="google-signin-scope" content="profile email">  -->
    <!--<link rel="stylesheet" type="text/css" href="style-signin.css"> -->

    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script>
      // Initialize Firebase

      var config = {
        apiKey: "AIzaSyCJRvvsqkPq45KpBQ_k57bzG8a36IASZEg",
        authDomain: "volunteering-454.firebaseapp.com",
        databaseURL: "https://volunteering-454.firebaseio.com",
        projectId: "volunteering-454",
        storageBucket: "volunteering-454.appspot.com",
        messagingSenderId: "470008611776"
      };
      firebase.initializeApp(config);
    </script>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="470008611776-0ebvss0hkb1tgh8g113t74hknbd8gmmv.apps.googleusercontent.com">


<!--
    <style>
      .popB {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.wordsInPopB {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

    </style> -->
    <!-- update the version number as needed -->
    <!-- <script defer src="/__/firebase/5.9.1/firebase-app.js"></script> -->
    <!-- include only the Firebase features as you need -->
    <!-- <script defer src="/__/firebase/5.9.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/5.9.1/firebase-database.js"></script>
    <script defer src="/__/firebase/5.9.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/5.9.1/firebase-storage.js"></script>
    initialize the SDK after all desired features are loaded 
    <script defer src="/__/firebase/init.js"></script>  -->

    <!-- Install the firebaseUI in order to utilize google signin -->
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  </head>
  <body>

    
    <!-- The google sign-in method is leanred from google developer website: https://developers.google.com/identity/sign-in/web/sign-in#before_you_begin;
    https://developers.google.com/identity/sign-in/web/people;
    https://developers.google.com/identity/sign-in/web/build-button;
    -->
    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        //document.getElementById("fullname").innerHTML = (profile.getName()).toString();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
      }
    </script>

      
   <div class="wrapper">
     <div class="inputBox">

      <h1> Welcome to our app</h1>
      <form>
          Please select your role before sign in:
          <select id="ChooseRole">
            <option>Volunteer</option>
            <option>Coordinator</option>
          </select>
          <input type="button" onclick="getOption()" value="Confirm">
        </form> 
      <input type="text" name="email" id="email" placeholder="Your email" style="font-size:110%">
      <input type="password" name="password" id="password" placeholder="Your password" style="font-size:110%">
      <button type="submit" id="signin" name='signin' >Sign In</button>  
      <button type="submit" id="signup" name='signup' >Sign Up</button> 
      

    </div>
    
    <!--
    <div id="popUpBox" class="popB">
      <div class="wordsInPopB">
        <p id="fullname" ></p>
      </div> -->


    </div> 
    <!-- <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div> -->
    <div id="my-signin2"></div>
    <script>
      function onSuccess(googleUser) {
        //window.onload = function (){
        var pop = document.getElementById('popUpBox');
        var name = googleUser.getBasicProfile().getName();
        var wel = "Welcome ";
        var role_chosen = document.getElementById("ChooseRole");
        console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
        console.log(name);
        
        alert(wel + (name.toString())+", you are signed in as "+ role_chosen.options[role_chosen.selectedIndex].text);
        //pop.style.display = "block";
        //document.getElementById("fullname").innerHTML = wel.concat(name.toString());
        
        //popB.style.display = "block";
        onSignIn(googleUser);
        //}
        //window.location = ("./AccountInformation.html");
        //}
      }
      function onFailure(error) {
        console.log(error);
      }
      function renderButton() {
        gapi.signin2.render('my-signin2', {
          'scope': 'profile email',
          'width': 240,
          'height': 50,
          'longtitle': true,
          'theme': 'dark',
          'onsuccess': onSuccess,
          'onfailure': onFailure
        });
      }
    </script>

    <!-- Sign out button, which will be implemented to all pages-->
    <a href="#" onclick="signOut();">Sign out</a>
    <script>
      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          console.log('User signed out.');
        });
      }
    </script>
  
    <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
 
    <script src=signin.js></script>
  </body>
</html>

<ul class="bg-bubbles">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  
   </div>
</html>
